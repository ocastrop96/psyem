$("#deshacer-filtro-Monitoreo").on("click",function(){window.location="monitoreo"}),$("#rango-Monitoreo").daterangepicker({ranges:{Hoy:[moment(),moment()],Ayer:[moment().subtract(1,"days"),moment().subtract(1,"days")],"Últimos 7 días":[moment().subtract(6,"days"),moment()],"Últimos 30 días":[moment().subtract(29,"days"),moment()],"Este mes":[moment().startOf("month"),moment().endOf("month")],"Último mes":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")]},startDate:moment(),endDate:moment(),opens:"right",maxSpan:{days:30},locale:{format:"DD/MM/YYYY",separator:" - ",applyLabel:"APLICAR",cancelLabel:"CANCELAR",fromLabel:"Desde",toLabel:"Hasta",customRangeLabel:"Personalizar",weekLabel:"W",daysOfWeek:["Do","Lu","Ma","Mie","Ju","Vi","Sa"],monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Setiembre","Octubre","Noviembre","Diciembre"],firstDay:1}},function(e,t){$("#daterange-btn span").html(e.format("MMMM D, YYYY")+"-"+t.format("MMMM D, YYYY"));var a=e.format("YYYY-MM-DD"),o=t.format("YYYY-MM-DD"),n=$("#daterange-btn span").html();let i;localStorage.setItem("capRangoMonit",n),window.location="index.php?ruta=monitoreo&fechaInicialMonit="+a+"&fechaFinalMonit="+o,Swal.fire({title:"Se está cargando la información",html:"Espere por favor...",timer:7e3,timerProgressBar:!0,onBeforeOpen:()=>{Swal.showLoading(),i=setInterval(()=>{const e=Swal.getContent();if(e){const t=e.querySelector("b");t&&(t.textContent=Swal.getTimerLeft())}},100)},onClose:()=>{clearInterval(i)}}).then(e=>{e.dismiss,Swal.DismissReason.timer})}),$(".daterangepicker.opensright .drp-buttons .cancelBtn").on("click",function(){let e;localStorage.removeItem("capRangoSeg"),localStorage.clear(),window.location="monitoreo",Swal.fire({title:"Se está cargando la información",html:"Espere por favor...",timer:7e3,timerProgressBar:!0,onBeforeOpen:()=>{Swal.showLoading(),e=setInterval(()=>{const e=Swal.getContent();if(e){const t=e.querySelector("b");t&&(t.textContent=Swal.getTimerLeft())}},100)},onClose:()=>{clearInterval(e)}}).then(e=>{e.dismiss===Swal.DismissReason.timer&&console.log("I was closed by the timer")})}),$(".daterangepicker.opensright .ranges li").on("click",function(){if("Hoy"==$(this).attr("data-range-key")){var e=new Date,t=e.getDate(),a=e.getMonth()+1,o=e.getFullYear();t=("0"+t).slice(-2);var n=o+"-"+(a=("0"+a).slice(-2))+"-"+t,i=o+"-"+a+"-"+t;let r;localStorage.setItem("capRangoMonit","Hoy"),window.location="index.php?ruta=monitoreo&fechaInicialMonit="+n+"&fechaFinalMonit="+i,Swal.fire({title:"Se está cargando la información",html:"Espere por favor...",timer:7e3,timerProgressBar:!0,onBeforeOpen:()=>{Swal.showLoading(),r=setInterval(()=>{const e=Swal.getContent();if(e){const t=e.querySelector("b");t&&(t.textContent=Swal.getTimerLeft())}},100)},onClose:()=>{clearInterval(r)}}).then(e=>{e.dismiss===Swal.DismissReason.timer&&console.log("I was closed by the timer")})}}),$(".datatableMonitoreo").DataTable({deferRender:!0,retrieve:!0,processing:!0,paging:!0,lengthChange:!0,searching:!0,ordering:!1,info:!0,autoWidth:!1,language:{url:"public/views/resources/js/dataTables.spanish.lang"}}),$(".datatableMonitoreo tbody").on("click",".btnVisualizarSeguimiento",function(){var e=$(this).attr("idSeguimiento"),t=new FormData;t.append("idSeguimiento",e),$.ajax({url:"public/views/src/ajaxSeguimientos.php",method:"POST",data:t,cache:!1,contentType:!1,processData:!1,dataType:"json",success:function(e){$("#idSeguimiento").val(e.idSeguimiento),$("#visSegFec").val(e.fRegistrSeg),$("#s21").val(e.nombresProfesional+" "+e.apellidosProfesional),$("#s22").val(e.detaTipSeguimiento),$("#s23").val(e.detaMotivoSef),$("#s30").val(e.obsSeg),$("#s24").val(e.cuentaAtencion+" || "+e.tipdocAtencion+"-"+e.nrodocAtencion+" - "+e.nombAtencion+" "+e.apPaternoAtencion+" "+e.apMaternoAtencion);var t=e.idTipoSeguimiento;1==t||2==t?$("#bloqueComFam13").removeClass("d-none"):$("#bloqueComFam13").addClass("d-none"),"SI"==e.comunFamSeg?($("#block11").removeClass("d-none"),$("#comSi13").prop("checked",!0),$("#comFami13").val("SI")):($("#block11").addClass("d-none"),$("#comNo13").prop("checked",!0),$("#comFami13").val("NO")),0!=e.idDiag1Seg&&$("#s25").val(e.cieP1+" - "+e.detaD1),0!=e.idDiag2Seg&&$("#s26").val(e.cieP2+" - "+e.detD2),0!=e.idDiag1SegFam?$("#s28").val(e.cieDF1+" - "+e.detDF1):$("#s28").val(""),0!=e.idDiag2SegFam&&$("#s29").val(e.cieDF2+" - "+e.detDF2),0!=e.idFamAtSeg?$("#s27").val(e.nombApFamiliar+" - "+e.detaParentesco+"  "+e.telcelFamiliar):$("#s27").val("")}})});