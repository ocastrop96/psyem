$("#deshacer-filtro-Seg").on("click",(function(){window.location="seguimiento"})),$("#rango-seguimiento").daterangepicker({ranges:{Hoy:[moment(),moment()],Ayer:[moment().subtract(1,"days"),moment().subtract(1,"days")],"Últimos 7 días":[moment().subtract(6,"days"),moment()],"Últimos 30 días":[moment().subtract(29,"days"),moment()],"Este mes":[moment().startOf("month"),moment().endOf("month")],"Último mes":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")]},startDate:moment(),endDate:moment(),opens:"right",maxSpan:{days:30},locale:{format:"DD/MM/YYYY",separator:" - ",applyLabel:"APLICAR",cancelLabel:"CANCELAR",fromLabel:"Desde",toLabel:"Hasta",customRangeLabel:"Personalizar",weekLabel:"W",daysOfWeek:["Do","Lu","Ma","Mie","Ju","Vi","Sa"],monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Setiembre","Octubre","Noviembre","Diciembre"],firstDay:1}},(function(e,t){$("#daterange-btn span").html(e.format("MMMM D, YYYY")+"-"+t.format("MMMM D, YYYY"));var a=e.format("YYYY-MM-DD"),n=t.format("YYYY-MM-DD"),o=$("#daterange-btn span").html();let i;localStorage.setItem("capRangoSeg",o),window.location="index.php?ruta=seguimiento&fechaInicialSeg="+a+"&fechaFinalSeg="+n,Swal.fire({title:"Se está cargando la información",html:"Espere por favor...",timer:7e3,timerProgressBar:!0,onBeforeOpen:()=>{Swal.showLoading(),i=setInterval((()=>{const e=Swal.getContent();if(e){const t=e.querySelector("b");t&&(t.textContent=Swal.getTimerLeft())}}),100)},onClose:()=>{clearInterval(i)}}).then((e=>{e.dismiss,Swal.DismissReason.timer}))})),$(".daterangepicker.opensright .drp-buttons .cancelBtn").on("click",(function(){let e;localStorage.removeItem("capRangoSeg"),localStorage.clear(),window.location="seguimiento",Swal.fire({title:"Se está cargando la información",html:"Espere por favor...",timer:7e3,timerProgressBar:!0,onBeforeOpen:()=>{Swal.showLoading(),e=setInterval((()=>{const e=Swal.getContent();if(e){const t=e.querySelector("b");t&&(t.textContent=Swal.getTimerLeft())}}),100)},onClose:()=>{clearInterval(e)}}).then((e=>{e.dismiss===Swal.DismissReason.timer&&console.log("I was closed by the timer")}))})),$(".daterangepicker.opensright .ranges li").on("click",(function(){if("Hoy"==$(this).attr("data-range-key")){var e=new Date,t=e.getDate(),a=e.getMonth()+1,n=e.getFullYear();t=("0"+t).slice(-2);var o=n+"-"+(a=("0"+a).slice(-2))+"-"+t,i=n+"-"+a+"-"+t;let c;localStorage.setItem("capRangoSeg","Hoy"),window.location="index.php?ruta=seguimiento&fechaInicialSeg="+o+"&fechaFinalSeg="+i,Swal.fire({title:"Se está cargando la información",html:"Espere por favor...",timer:7e3,timerProgressBar:!0,onBeforeOpen:()=>{Swal.showLoading(),c=setInterval((()=>{const e=Swal.getContent();if(e){const t=e.querySelector("b");t&&(t.textContent=Swal.getTimerLeft())}}),100)},onClose:()=>{clearInterval(c)}}).then((e=>{e.dismiss===Swal.DismissReason.timer&&console.log("I was closed by the timer")}))}})),$(".datatableSeguimiento").DataTable({deferRender:!0,retrieve:!0,processing:!0,paging:!0,lengthChange:!0,searching:!0,ordering:!1,info:!0,autoWidth:!1,language:{url:"public/views/resources/js/dataTables.spanish.lang"}}),$("#rgSegObs").keyup((function(){var e=$(this).val().toUpperCase();$("#rgSegObs").val(e)})),$("#edtSegObs").keyup((function(){var e=$(this).val().toUpperCase();$("#edtSegObs").val(e)})),$("#rgSegPac").select2({maximumInputLength:"12",minimumInputLength:"2",language:{noResults:function(){return"No hay resultado"},searching:function(){return"Buscando.."},inputTooShort:function(){return"Ingrese 2 o más caracteres"},inputTooLong:function(){return"Ingrese máximo 12 caracteres"}},scrollAfterSelect:!0,placeholder:"Ingrese N° de DNI,CE,PASS o Nombres del Paciente",ajax:{url:"public/views/src/ajaxFamiliares.php",type:"post",dataType:"json",delay:200,data:function(e){return{searchTerm2:e.term}},processResults:function(e){return{results:e}},cache:!0}}),$("#edtSegPac").select2({maximumInputLength:"12",minimumInputLength:"2",language:{noResults:function(){return"No hay resultado"},searching:function(){return"Buscando.."},inputTooShort:function(){return"Ingrese 2 o más caracteres"},inputTooLong:function(){return"Ingrese máximo 12 caracteres"}},scrollAfterSelect:!0,placeholder:"Ingrese N° de DNI,CE,PASS o Nombres del Paciente",ajax:{url:"public/views/src/ajaxFamiliares.php",type:"post",dataType:"json",delay:200,data:function(e){return{searchTerm2:e.term}},processResults:function(e){return $("#seleccionActual2").remove(),$("#seleccionActual21").remove(),$("#seleccionActual3").remove(),$("#seleccionActual31").remove(),$("#seleccionActual27").remove(),$("#seleccionActual272").remove(),$("#seleccionActual28").remove(),$("#seleccionActual282").remove(),$("#seleccionActual40").remove(),$("#seleccionActual401").remove(),$("#seleccionActual41").remove(),$("#seleccionActual411").remove(),$("#idFamAnt").val("0"),$("#edtSegDf11").val("0"),$("#edtSegDf11").html("Seleccione Diagnóstico"),$("#edtSegDf21").val("0"),$("#edtSegDf21").html("Seleccione Diagnóstico o Actividad (Opcional)"),$("#edtSegDf31").val("0"),$("#edtSegDf31").html("Seleccione Diagnóstico o Actividad (Opcional)"),$("#edtSegDf41").val("0"),$("#edtSegDf41").html("Seleccione Diagnóstico o Actividad (Opcional)"),{results:e}},cache:!0}}),$(".rgSegDp1").select2({maximumInputLength:"12",minimumInputLength:"2",language:{noResults:function(){return"No hay resultado"},searching:function(){return"Buscando Diagnóstico Principal ..."},inputTooShort:function(){return"Ingrese 2 o más caracteres"},inputTooLong:function(){return"Ingrese máximo 12 caracteres"}},scrollAfterSelect:!0,placeholder:"Ingrese CIE 10 o Descripción del Dx",ajax:{url:"public/views/src/ajaxDiagnosticos.php",type:"post",dataType:"json",delay:200,data:function(e){return{searchTerm:e.term}},processResults:function(e){return{results:e}},cache:!0}}),$(".edtSegDp1").select2({maximumInputLength:"12",minimumInputLength:"2",language:{noResults:function(){return"No hay resultado"},searching:function(){return"Buscando Diagnóstico Principal ..."},inputTooShort:function(){return"Ingrese 2 o más caracteres"},inputTooLong:function(){return"Ingrese máximo 12 caracteres"}},scrollAfterSelect:!0,placeholder:"Ingrese CIE 10 o Descripción del Dx",ajax:{url:"public/views/src/ajaxDiagnosticos.php",type:"post",dataType:"json",delay:200,data:function(e){return{searchTerm:e.term}},processResults:function(e){return $("#seleccionActual25").addClass("d-none"),$("#seleccionActual252").addClass("d-none"),$("#seleccionActual26").addClass("d-none"),$("#seleccionActual262").addClass("d-none"),$("#seleccionActual30").addClass("d-none"),$("#seleccionActual302").addClass("d-none"),$("#seleccionActual312").addClass("d-none"),$("#seleccionActual3121").addClass("d-none"),$("#edtSegDp21").val("0"),$("#edtSegDp21").html("Seleccione Diagnóstico o Actividad (Opcional)"),$("#edtSegDp31").val("0"),$("#edtSegDp31").html("Seleccione Diagnóstico o Actividad (Opcional)"),$("#edtSegDp41").val("0"),$("#edtSegDp41").html("Seleccione Diagnóstico o Actividad (Opcional)"),{results:e}},cache:!0}}),$(".rgSegDp2").select2({maximumInputLength:"12",minimumInputLength:"2",language:{noResults:function(){return"No hay resultado"},searching:function(){return"Buscando Diagnóstico Principal ..."},inputTooShort:function(){return"Ingrese 2 o más caracteres"},inputTooLong:function(){return"Ingrese máximo 12 caracteres"}},scrollAfterSelect:!0,placeholder:"Ingrese CIE 10 o Descripción del Dx",ajax:{url:"public/views/src/ajaxDiagnosticos.php",type:"post",dataType:"json",delay:200,data:function(e){return{searchTerm2:e.term,excluido:$("#rgSegDp1").val()}},processResults:function(e){return{results:e}},cache:!0}}),$(".rgSegDp3").select2({maximumInputLength:"12",minimumInputLength:"2",language:{noResults:function(){return"No hay resultado"},searching:function(){return"Buscando Diagnóstico Principal ..."},inputTooShort:function(){return"Ingrese 2 o más caracteres"},inputTooLong:function(){return"Ingrese máximo 12 caracteres"}},scrollAfterSelect:!0,placeholder:"Ingrese CIE 10 o Descripción del Dx",ajax:{url:"public/views/src/ajaxDiagnosticos.php",type:"post",dataType:"json",delay:200,data:function(e){return{searchTerm3:e.term,excluido:$("#rgSegDp1").val(),excluido2:$("#rgSegDp2").val()}},processResults:function(e){return{results:e}},cache:!0}}),$(".rgSegDf3").select2({maximumInputLength:"12",minimumInputLength:"2",language:{noResults:function(){return"No hay resultado"},searching:function(){return"Buscando Diagnóstico Principal ..."},inputTooShort:function(){return"Ingrese 2 o más caracteres"},inputTooLong:function(){return"Ingrese máximo 12 caracteres"}},scrollAfterSelect:!0,placeholder:"Ingrese CIE 10 o Descripción del Dx",ajax:{url:"public/views/src/ajaxDiagnosticos.php",type:"post",dataType:"json",delay:200,data:function(e){return{searchTerm3:e.term,excluido:$("#rgSegDf1").val(),excluido2:$("#rgSegDf2").val()}},processResults:function(e){return{results:e}},cache:!0}}),$(".rgSegDp4").select2({maximumInputLength:"12",minimumInputLength:"2",language:{noResults:function(){return"No hay resultado"},searching:function(){return"Buscando Diagnóstico Principal ..."},inputTooShort:function(){return"Ingrese 2 o más caracteres"},inputTooLong:function(){return"Ingrese máximo 12 caracteres"}},scrollAfterSelect:!0,placeholder:"Ingrese CIE 10 o Descripción del Dx",ajax:{url:"public/views/src/ajaxDiagnosticos.php",type:"post",dataType:"json",delay:200,data:function(e){return{searchTerm4:e.term,excluido:$("#rgSegDp1").val(),excluido2:$("#rgSegDp2").val(),excluido3:$("#rgSegDp3").val()}},processResults:function(e){return{results:e}},cache:!0}}),$(".rgSegDf4").select2({maximumInputLength:"12",minimumInputLength:"2",language:{noResults:function(){return"No hay resultado"},searching:function(){return"Buscando Diagnóstico Principal ..."},inputTooShort:function(){return"Ingrese 2 o más caracteres"},inputTooLong:function(){return"Ingrese máximo 12 caracteres"}},scrollAfterSelect:!0,placeholder:"Ingrese CIE 10 o Descripción del Dx",ajax:{url:"public/views/src/ajaxDiagnosticos.php",type:"post",dataType:"json",delay:200,data:function(e){return{searchTerm4:e.term,excluido:$("#rgSegDf1").val(),excluido2:$("#rgSegDf2").val(),excluido3:$("#rgSegDf3").val()}},processResults:function(e){return{results:e}},cache:!0}}),$(".edtSegDp2").select2({maximumInputLength:"12",minimumInputLength:"2",language:{noResults:function(){return"No hay resultado"},searching:function(){return"Buscando Diagnóstico Principal ..."},inputTooShort:function(){return"Ingrese 2 o más caracteres"},inputTooLong:function(){return"Ingrese máximo 12 caracteres"}},scrollAfterSelect:!0,placeholder:"Ingrese CIE 10 o Descripción del Dx",ajax:{url:"public/views/src/ajaxDiagnosticos.php",type:"post",dataType:"json",delay:200,data:function(e){return{searchTerm2:e.term,excluido:$("#edtSegDp1").val()}},processResults:function(e){return $("#seleccionActual26").addClass("d-none"),$("#seleccionActual262").addClass("d-none"),$("#seleccionActual30").addClass("d-none"),$("#seleccionActual302").addClass("d-none"),$("#seleccionActual312").addClass("d-none"),$("#seleccionActual3121").addClass("d-none"),$("#edtSegDp31").val("0"),$("#edtSegDp31").html("Seleccione Diagnóstico o Actividad (Opcional)"),$("#edtSegDp41").val("0"),$("#edtSegDp41").html("Seleccione Diagnóstico o Actividad (Opcional)"),{results:e}},cache:!0}}),$(".edtSegDp3").select2({maximumInputLength:"12",minimumInputLength:"2",language:{noResults:function(){return"No hay resultado"},searching:function(){return"Buscando Diagnóstico Opcional ..."},inputTooShort:function(){return"Ingrese 2 o más caracteres"},inputTooLong:function(){return"Ingrese máximo 12 caracteres"}},scrollAfterSelect:!0,placeholder:"Ingrese CIE 10 o Descripción del Dx",ajax:{url:"public/views/src/ajaxDiagnosticos.php",type:"post",dataType:"json",delay:200,data:function(e){return{searchTerm3:e.term,excluido:$("#edtSegDp1").val(),excluido2:$("#edtSegDp2").val()}},processResults:function(e){return $("#seleccionActual30").addClass("d-none"),$("#seleccionActual302").addClass("d-none"),$("#seleccionActual312").addClass("d-none"),$("#seleccionActual3121").addClass("d-none"),$("#edtSegDp41").val("0"),$("#edtSegDp41").html("Seleccione Diagnóstico o Actividad (Opcional)"),{results:e}},cache:!0}}),$(".edtSegDp4").select2({maximumInputLength:"12",minimumInputLength:"2",language:{noResults:function(){return"No hay resultado"},searching:function(){return"Buscando Diagnóstico Opcional ..."},inputTooShort:function(){return"Ingrese 2 o más caracteres"},inputTooLong:function(){return"Ingrese máximo 12 caracteres"}},scrollAfterSelect:!0,placeholder:"Ingrese CIE 10 o Descripción del Dx",ajax:{url:"public/views/src/ajaxDiagnosticos.php",type:"post",dataType:"json",delay:200,data:function(e){return{searchTerm4:e.term,excluido:$("#edtSegDp1").val(),excluido2:$("#edtSegDp2").val(),excluido3:$("#edtSegDp3").val()}},processResults:function(e){return $("#seleccionActual312").addClass("d-none"),$("#seleccionActual3121").addClass("d-none"),{results:e}},cache:!0}}),$(".rgSegDf1").select2({maximumInputLength:"12",minimumInputLength:"2",language:{noResults:function(){return"No hay resultado"},searching:function(){return"Buscando Diagnóstico Principal ..."},inputTooShort:function(){return"Ingrese 2 o más caracteres"},inputTooLong:function(){return"Ingrese máximo 12 caracteres"}},scrollAfterSelect:!0,placeholder:"Ingrese CIE 10 o Descripción del Dx",ajax:{url:"public/views/src/ajaxDiagnosticos.php",type:"post",dataType:"json",delay:200,data:function(e){return{searchTerm:e.term}},processResults:function(e){return{results:e}},cache:!0}}),$(".edtSegDf1").select2({maximumInputLength:"12",minimumInputLength:"2",language:{noResults:function(){return"No hay resultado"},searching:function(){return"Buscando Diagnóstico Principal ..."},inputTooShort:function(){return"Ingrese 2 o más caracteres"},inputTooLong:function(){return"Ingrese máximo 12 caracteres"}},scrollAfterSelect:!0,placeholder:"Ingrese CIE 10 o Descripción del Dx",ajax:{url:"public/views/src/ajaxDiagnosticos.php",type:"post",dataType:"json",delay:200,data:function(e){return{searchTerm:e.term}},processResults:function(e){return $("#seleccionActual27").addClass("d-none"),$("#seleccionActual272").addClass("d-none"),$("#seleccionActual28").addClass("d-none"),$("#seleccionActual282").addClass("d-none"),$("#seleccionActual40").addClass("d-none"),$("#seleccionActual401").addClass("d-none"),$("#seleccionActual41").addClass("d-none"),$("#seleccionActual411").addClass("d-none"),$("#edtSegDf21").val("0"),$("#edtSegDf21").html("Seleccione Diagnóstico o Actividad (Opcional)"),$("#edtSegDf31").val("0"),$("#edtSegDf31").html("Seleccione Diagnóstico o Actividad (Opcional)"),$("#edtSegDf41").val("0"),$("#edtSegDf41").html("Seleccione Diagnóstico o Actividad (Opcional)"),{results:e}},cache:!0}}),$(".rgSegDf2").select2({maximumInputLength:"12",minimumInputLength:"2",language:{noResults:function(){return"No hay resultado"},searching:function(){return"Buscando Diagnóstico Principal ..."},inputTooShort:function(){return"Ingrese 2 o más caracteres"},inputTooLong:function(){return"Ingrese máximo 12 caracteres"}},scrollAfterSelect:!0,placeholder:"Ingrese CIE 10 o Descripción del Dx",ajax:{url:"public/views/src/ajaxDiagnosticos.php",type:"post",dataType:"json",delay:200,data:function(e){return{searchTerm2:e.term,excluido:$("#rgSegDf1").val()}},processResults:function(e){return{results:e}},cache:!0}}),$(".edtSegDf2").select2({maximumInputLength:"12",minimumInputLength:"2",language:{noResults:function(){return"No hay resultado"},searching:function(){return"Buscando Diagnóstico Principal ..."},inputTooShort:function(){return"Ingrese 2 o más caracteres"},inputTooLong:function(){return"Ingrese máximo 12 caracteres"}},scrollAfterSelect:!0,placeholder:"Ingrese CIE 10 o Descripción del Dx",ajax:{url:"public/views/src/ajaxDiagnosticos.php",type:"post",dataType:"json",delay:200,data:function(e){return{searchTerm2:e.term,excluido:$("#edtSegDf1").val()}},processResults:function(e){return $("#seleccionActual28").addClass("d-none"),$("#seleccionActual282").addClass("d-none"),$("#seleccionActual40").addClass("d-none"),$("#seleccionActual401").addClass("d-none"),$("#seleccionActual41").addClass("d-none"),$("#seleccionActual411").addClass("d-none"),$("#edtSegDf31").val("0"),$("#edtSegDf31").html("Seleccione Diagnóstico o Actividad (Opcional)"),$("#edtSegDf41").val("0"),$("#edtSegDf41").html("Seleccione Diagnóstico o Actividad (Opcional)"),{results:e}},cache:!0}}),$(".edtSegDf3").select2({maximumInputLength:"12",minimumInputLength:"2",language:{noResults:function(){return"No hay resultado"},searching:function(){return"Buscando Diagnóstico Opcional ..."},inputTooShort:function(){return"Ingrese 2 o más caracteres"},inputTooLong:function(){return"Ingrese máximo 12 caracteres"}},scrollAfterSelect:!0,placeholder:"Ingrese CIE 10 o Descripción del Dx",ajax:{url:"public/views/src/ajaxDiagnosticos.php",type:"post",dataType:"json",delay:200,data:function(e){return{searchTerm3:e.term,excluido:$("#edtSegDf1").val(),excluido2:$("#edtSegDf2").val()}},processResults:function(e){return $("#seleccionActual40").addClass("d-none"),$("#seleccionActual401").addClass("d-none"),$("#seleccionActual41").addClass("d-none"),$("#seleccionActual411").addClass("d-none"),$("#edtSegDf41").val("0"),$("#edtSegDf41").html("Seleccione Diagnóstico o Actividad (Opcional)"),{results:e}},cache:!0}}),$(".edtSegDf4").select2({maximumInputLength:"12",minimumInputLength:"2",language:{noResults:function(){return"No hay resultado"},searching:function(){return"Buscando Diagnóstico Opcional ..."},inputTooShort:function(){return"Ingrese 2 o más caracteres"},inputTooLong:function(){return"Ingrese máximo 12 caracteres"}},scrollAfterSelect:!0,placeholder:"Ingrese CIE 10 o Descripción del Dx",ajax:{url:"public/views/src/ajaxDiagnosticos.php",type:"post",dataType:"json",delay:200,data:function(e){return{searchTerm4:e.term,excluido:$("#edtSegDf1").val(),excluido2:$("#edtSegDf2").val(),excluido3:$("#edtSegDf3").val()}},processResults:function(e){return $("#seleccionActual41").addClass("d-none"),$("#seleccionActual411").addClass("d-none"),$(".edtSegDf4").empty().trigger("change"),$("#edtSegDf4").val("0"),$("#edtSegDf4").html("Seleccione Diagnóstico o Actividad (Opcional)"),{results:e}},cache:!0}}),$("#rgSegFec").inputmask("dd/mm/yyyy",{placeholder:"dd/mm/yyyy"}),$("#rgSegFec").datepicker({format:"dd/mm/yyyy",autoclose:!0,language:"es",endDate:new Date}),$("#edtSegFec").inputmask("dd/mm/yyyy",{placeholder:"dd/mm/yyyy"}),$("#edtSegFec").datepicker({format:"dd/mm/yyyy",autoclose:!0,language:"es",endDate:new Date}),$("#rgSegTip").on("change",(function(){let e=$(this).val();e>0?1==e||2==e?($("#bloqueComFam").removeClass("d-none"),$("#comSi").prop("checked",!0),$("#comFami").val("SI")):($("#bloqueComFam").addClass("d-none"),$("#comNo").prop("checked",!0),$("#comFami").val("NO")):($("#comNo").prop("checked",!0),$("#comFami").val("NO"),$("#bloqueComFam").addClass("d-none"))})),$("#edtSegTip").on("change",(function(){let e=$(this).val();e>0?1==e||2==e?($("#bloqueComFam1").removeClass("d-none"),$("#block11").removeClass("d-none"),$("#comSi1").prop("checked",!0),$("#comFami1").val("SI")):($("#bloqueComFam1").addClass("d-none"),$("#comNo1").prop("checked",!0),$("#comFami1").val("NO")):($("#comNo1").prop("checked",!0),$("#comFami1").val("NO"),$("#bloqueComFam1").addClass("d-none"))})),$("#comSi").click((function(){if($("#comSi").is(":checked")){let e="<option value='0'>Seleccione Dx o Actividad</option>";$("#comFami").val("SI"),$("#block1").removeClass("d-none"),$("#rgSegFam")[0].selectedIndex=0,$("#rgSegDf1").empty().trigger("change"),$("#rgSegDf1")[0].selectedIndex=0,$("#rgSegDf2").empty().trigger("change"),$("#rgSegDf2")[0].selectedIndex=0,$("#rgSegDf3").empty().trigger("change"),$("#rgSegDf3")[0].selectedIndex=0,$("#rgSegDf4").empty().trigger("change"),$("#rgSegDf4")[0].selectedIndex=0,$("#rgSegDf1").html(e),$("#rgSegDf2").html(e),$("#rgSegDf3").html(e),$("#rgSegDf4").html(e)}else $("#comFami").val("NO")})),$("#comNo").click((function(){if($("#comNo").is(":checked")){let e="<option value='0'>Seleccione Dx o Actividad</option>";$("#comFami").val("NO"),$("#block1").addClass("d-none"),$("#rgSegFam")[0].selectedIndex=0,$("#rgSegDf1").empty().trigger("change"),$("#rgSegDf1")[0].selectedIndex=0,$("#rgSegDf1").html(e),$("#rgSegDf2").empty().trigger("change"),$("#rgSegDf2")[0].selectedIndex=0,$("#rgSegDf2").html(e),$("#rgSegDf3").empty().trigger("change"),$("#rgSegDf3")[0].selectedIndex=0,$("#rgSegDf3").html(e),$("#rgSegDf4").empty().trigger("change"),$("#rgSegDf4")[0].selectedIndex=0,$("#rgSegDf4").html(e)}else $("#comFami").val("SI")})),$("#comSi1").click((function(){$("#comSi1").is(":checked")?($("#comFami1").val("SI"),$("#block11").removeClass("d-none"),$("#edtSegFam")[0].selectedIndex=0,$("#edtSegDf1")[0].selectedIndex=0,$("#edtSegDf2")[0].selectedIndex=0,$("#edtSegDf3")[0].selectedIndex=0,$("#edtSegDf4")[0].selectedIndex=0):$("#comFami1").val("NO")})),$("#comNo1").click((function(){if($("#comNo1").is(":checked")){let e="<option value='0'>Seleccione Dx o Actividad</option>";$("#comFami1").val("NO"),$("#block11").addClass("d-none"),$("#edtSegFam")[0].selectedIndex=0,$("#edtSegDf1")[0].selectedIndex=0,$("#edtSegDf1").html(e),$("#edtSegDf2")[0].selectedIndex=0,$("#edtSegDf2").html(e),$("#edtSegDf3")[0].selectedIndex=0,$("#edtSegDf3").html(e),$("#edtSegDf4")[0].selectedIndex=0,$("#edtSegDf4").html(e),$("#seleccionActual3").addClass("d-none"),$("#seleccionActual31").addClass("d-none"),$("#seleccionActual27").addClass("d-none"),$("#seleccionActual272").addClass("d-none"),$("#seleccionActual28").addClass("d-none"),$("#seleccionActual282").addClass("d-none"),$("#seleccionActual40").addClass("d-none"),$("#seleccionActual401").addClass("d-none"),$("#seleccionActual41").addClass("d-none"),$("#seleccionActual411").addClass("d-none")}else $("#comFami").val("SI")})),$("#rgSegDp1").on("change",(function(){var e=$(this).val();if($("#rgSegDp2")[0].selectedIndex=0,e>0)$.ajax({url:"public/views/src/ajaxDiagnosticos.php",method:"POST",dataType:"html",data:{existe:e}}).done((function(e){$("#rgSegDp2").html(e)})).fail((function(){console.log("error")}));else{$("#rgSegDp2").html("<option value='0'>No hay actividades existentes</option>")}})),$("#rgSegDf1").on("change",(function(){var e=$(this).val();if($("#rgSegDf2")[0].selectedIndex=0,e>0)$.ajax({url:"public/views/src/ajaxDiagnosticos.php",method:"POST",dataType:"html",data:{existe:e}}).done((function(e){$("#rgSegDf2").html(e)})).fail((function(){console.log("error")}));else{$("#rgSegDf2").html("<option value='0'>No hay actividades existentes</option>")}})),$("#rgSegPac").on("change",(function(){var e=$(this).val();$("#rgSegFam")[0].selectedIndex=0,e>0&&$.ajax({url:"public/views/src/ajaxFamiliares.php",method:"POST",dataType:"html",data:{atencion:e}}).done((function(e){$("#rgSegFam").html(e)})).fail((function(){console.log("error")}))})),$("#btnRegSeg").on("click",(function(){var e=$("#rgSegTip").val();1==e&&$("#formRegSeg").validate({rules:{rgSegFec:{required:!0},rgSegTip:{valueNotEquals:"0"},rgSegProf:{valueNotEquals:"0"},rgSegMot:{valueNotEquals:"0"},rgSegPac:{valueNotEquals:"0",required:!0},rgSegDp1:{valueNotEquals:"0"},rgSegFam:{valueNotEquals:"0"},rgSegDf1:{valueNotEquals:"0"}},messages:{rgSegFec:{required:"Ingrese Fecha de Seguimiento"},rgSegTip:{valueNotEquals:"Seleccione Tipo de Seguimiento"},rgSegProf:{valueNotEquals:"Seleccione Profesional"},rgSegMot:{valueNotEquals:"Seleccione Motivo"},rgSegPac:{valueNotEquals:"Seleccione Paciente",required:"Seleccione Paciente atendido"},rgSegDp1:{valueNotEquals:"Seleccione al menos un diagnóstico"},rgSegFam:{valueNotEquals:"Seleccione Familiar"},rgSegDf1:{valueNotEquals:"Seleccione al menos un diagnóstico"}},errorElement:"span",errorPlacement:function(e,t){e.addClass("invalid-feedback"),t.closest(".form-group").append(e)},highlight:function(e,t,a){$(e).addClass("is-invalid")},unhighlight:function(e,t,a){$(e).removeClass("is-invalid")}}),$("#comSi").is(":checked")?$("#formRegSeg").validate({rules:{rgSegFec:{required:!0},rgSegTip:{valueNotEquals:"0"},rgSegProf:{valueNotEquals:"0"},rgSegMot:{valueNotEquals:"0"},rgSegPac:{valueNotEquals:"0",required:!0},rgSegDp1:{valueNotEquals:"0"}},messages:{rgSegFec:{required:"Ingrese Fecha de Seguimiento"},rgSegTip:{valueNotEquals:"Seleccione Tipo de Seguimiento"},rgSegProf:{valueNotEquals:"Seleccione Profesional"},rgSegMot:{valueNotEquals:"Seleccione Motivo"},rgSegPac:{valueNotEquals:"Seleccione Paciente",required:"Seleccione Paciente atendido"},rgSegDp1:{valueNotEquals:"Seleccione al menos un diagnóstico"}},errorElement:"span",errorPlacement:function(e,t){e.addClass("invalid-feedback"),t.closest(".form-group").append(e)},highlight:function(e,t,a){$(e).addClass("is-invalid")},unhighlight:function(e,t,a){$(e).removeClass("is-invalid")}}):2==e?$("#formRegSeg").validate({rules:{rgSegFec:{required:!0},rgSegTip:{valueNotEquals:"0",required:!0},rgSegProf:{valueNotEquals:"0",required:!0},rgSegMot:{valueNotEquals:"0",required:!0},rgSegPac:{valueNotEquals:"0",required:!0},rgSegDp1:{valueNotEquals:"0",required:!0},rgSegFam:{valueNotEquals:"0",required:!0},rgSegDf1:{valueNotEquals:"0",required:!0}},messages:{rgSegFec:{required:"Ingrese Fecha de Seguimiento"},rgSegTip:{valueNotEquals:"Seleccione Tipo de Seguimiento",required:"Seleccione una opción"},rgSegProf:{valueNotEquals:"Seleccione Profesional"},rgSegMot:{valueNotEquals:"Seleccione Motivo",required:"Seleccione una opción"},rgSegPac:{valueNotEquals:"Seleccione Paciente",required:"Seleccione Paciente atendido"},rgSegDp1:{valueNotEquals:"Seleccione al menos un diagnóstico",required:"Seleccione una opción"},rgSegFam:{valueNotEquals:"Seleccione Familiar",required:"Seleccione una opción"},rgSegDf1:{valueNotEquals:"Seleccione al menos un diagnóstico",required:"Seleccione una opción"}},errorElement:"span",errorPlacement:function(e,t){e.addClass("invalid-feedback"),t.closest(".form-group").append(e)},highlight:function(e,t,a){$(e).addClass("is-invalid")},unhighlight:function(e,t,a){$(e).removeClass("is-invalid")}}):$("#formRegSeg").validate({rules:{rgSegFec:{required:!0},rgSegTip:{valueNotEquals:"0"},rgSegProf:{valueNotEquals:"0"},rgSegMot:{valueNotEquals:"0"},rgSegPac:{valueNotEquals:"0",required:!0},rgSegDp1:{valueNotEquals:"0"}},messages:{rgSegFec:{required:"Ingrese Fecha de Seguimiento"},rgSegTip:{valueNotEquals:"Seleccione Tipo de Seguimiento"},rgSegProf:{valueNotEquals:"Seleccione Profesional"},rgSegMot:{valueNotEquals:"Seleccione Motivo"},rgSegPac:{valueNotEquals:"Seleccione Paciente",required:"Seleccione Paciente atendido"},rgSegDp1:{valueNotEquals:"Seleccione al menos un diagnóstico"}},errorElement:"span",errorPlacement:function(e,t){e.addClass("invalid-feedback"),t.closest(".form-group").append(e)},highlight:function(e,t,a){$(e).addClass("is-invalid")},unhighlight:function(e,t,a){$(e).removeClass("is-invalid")}})})),$(".datatableSeguimiento tbody").on("click",".btnEditarSeguimiento",(function(){var e=$(this).attr("idSeguimiento"),t=$(this).attr("idProfesional"),a=$("#idProfH").val();if($("#seleccionActual26").addClass("d-none"),$("#seleccionActual27").addClass("d-none"),$("#seleccionActual28").addClass("d-none"),$("#seleccionActual30").addClass("d-none"),$("#seleccionActual312").addClass("d-none"),$("#seleccionActual40").addClass("d-none"),$("#seleccionActual41").addClass("d-none"),0!=a)if(t==a){var n=new FormData;n.append("idSeguimiento",e),$.ajax({url:"public/views/src/ajaxSeguimientos.php",method:"POST",data:n,cache:!1,contentType:!1,processData:!1,dataType:"json",success:function(e){$("#idSeguimiento").val(e.idSeguimiento),$("#edtSegObs").val(e.obsSeg),$("#edtSegFec").val(e.fRegistrSeg),$("#edtSegProf").val(e.idProfesional),$("#s2").val(e.nombresProfesional+" "+e.apellidosProfesional),$("#edtSegTip1").val(e.idTipoSeguimiento),$("#edtSegTip1").html(e.detaTipSeguimiento),$("#edtSegMot1").val(e.idMotSeguimiento),$("#edtSegMot1").html(e.detaMotivoSef),$("#seleccionActual21").html(e.cuentaAtencion+" - "+e.tipdocAtencion+"-"+e.nrodocAtencion+" - "+e.nombAtencion+" "+e.apPaternoAtencion+" "+e.apMaternoAtencion),$("#edtSegPac1").val(e.idAtencionPac),$("#edtSegPac1").html(e.cuentaAtencion+" || "+e.tipdocAtencion+"-"+e.nrodocAtencion+" - "+e.nombAtencion+" "+e.apPaternoAtencion+" "+e.apMaternoAtencion);var t=e.idTipoSeguimiento;if(1==t||2==t?$("#bloqueComFam1").removeClass("d-none"):$("#bloqueComFam1").addClass("d-none"),"SI"==e.comunFamSeg?($("#block11").removeClass("d-none"),$("#comSi1").prop("checked",!0),$("#comFami1").val("SI")):($("#block11").addClass("d-none"),$("#comNo1").prop("checked",!0),$("#comFami1").val("NO")),0!=e.idDiag1Seg){$("#edtSegDp11").val(e.idDiag1Seg),$("#edtSegDp11").html(e.cieP1+" - "+e.detaD1);let t=e.detaD1.substring(0,60);$("#seleccionActual252").html(e.cieP1+" || "+t)}if(0!=e.idDiag2Seg){$("#seleccionActual26").removeClass("d-none"),$("#edtSegDp21").val(e.idDiag2Seg),$("#edtSegDp21").html(e.cieP2+" - "+e.detD2);let t=e.detD2.substring(0,60);$("#seleccionActual262").html(e.cieP2+" || "+t)}if(0!=e.idDiag3Seg){$("#seleccionActual30").removeClass("d-none"),$("#edtSegDp31").val(e.idDiag3Seg),$("#edtSegDp31").html(e.cieP3+" - "+e.detD3);let t=e.detD3.substring(0,60);$("#seleccionActual302").html(e.cieP3+" || "+t)}if(0!=e.idDiag4Seg){$("#seleccionActual312").removeClass("d-none"),$("#edtSegDp41").val(e.idDiag4Seg),$("#edtSegDp41").html(e.cieP4+" - "+e.detD4);let t=e.detD4.substring(0,55);$("#seleccionActual3121").html(e.cieP4+" || "+t)}if(0!=e.idDiag1SegFam){$("#seleccionActual27").removeClass("d-none"),$("#edtSegDf11").val(e.idDiag1SegFam),$("#edtSegDf11").html(e.cieDF1+" - "+e.detDF1);let t=e.detDF1.substring(0,60);$("#seleccionActual272").html(e.cieDF1+" || "+t)}else $("#edtSegDf11").val("0"),$("#edtSegDf11").html("Seleccione Diagnóstico");if(0!=e.idDiag2SegFam){$("#seleccionActual28").removeClass("d-none"),$("#edtSegDf21").val(e.idDiag2SegFam),$("#edtSegDf21").html(e.cieDF2+" - "+e.detDF2);let t=e.detDF2.substring(0,60);$("#seleccionActual282").html(e.cieDF2+" || "+t)}if(0!=e.idDiag3SegFam){$("#seleccionActual40").removeClass("d-none"),$("#edtSegDf31").val(e.idDiag3SegFam),$("#edtSegDf31").html(e.cieDF3+" - "+e.detDF3);let t=e.detDF3.substring(0,60);$("#seleccionActual401").html(e.cieDF3+" || "+t)}if(0!=e.idDiag4SegFam){$("#seleccionActual41").removeClass("d-none"),$("#edtSegDf41").val(e.idDiag4SegFam),$("#edtSegDf41").html(e.cieDF4+" - "+e.detDF4);let t=e.detDF4.substring(0,60);$("#seleccionActual411").html(e.cieDF4+" || "+t)}$("#idFamAnt").val(e.idFamAtSeg),0!=e.idFamAtSeg?$("#seleccionActual31").html(e.nombApFamiliar+" - "+e.detaParentesco+"  "+e.telcelFamiliar):$("#seleccionActual31").html("");var a=e.idAtencionPac;$("#edtSegFam")[0].selectedIndex=0,$.ajax({url:"public/views/src/ajaxFamiliares.php",method:"POST",dataType:"html",data:{atencion:a}}).done((function(e){$("#edtSegFam").html(e)})).fail((function(){console.log("error")}))}}),$("#modal-editar-seguimiento").modal("show")}else Swal.fire({icon:"error",title:"No tienes permiso para editar el seguimiento seleccionado",showConfirmButton:!1,timer:1600}),$("#modal-editar-seguimiento").modal("hide");else $("#modal-editar-seguimiento").modal("hide"),Swal.fire({icon:"error",title:"No tienes permiso para editar el seguimiento seleccionado",showConfirmButton:!1,timer:1600})})),$("#edtSegPac").on("change",(function(){var e=$(this).val();$("#edtSegFam")[0].selectedIndex=0,e>0&&$.ajax({url:"public/views/src/ajaxFamiliares.php",method:"POST",dataType:"html",data:{atencion:e}}).done((function(e){$("#edtSegFam").html(e)})).fail((function(){console.log("error")}))})),$("#edtSegDp1").on("change",(function(){var e=$(this).val();if($("#edtSegDp2")[0].selectedIndex=0,e>0)$.ajax({url:"public/views/src/ajaxDiagnosticos.php",method:"POST",dataType:"html",data:{existe:e}}).done((function(e){$("#edtSegDp2").html(e)})).fail((function(){console.log("error")}));else{$("#edtSegDp2").html("<option value='0'>No hay actividades existentes</option>")}})),$("#edtSegDf1").on("change",(function(){var e=$(this).val();if($("#edtSegDf2")[0].selectedIndex=0,e>0)$.ajax({url:"public/views/src/ajaxDiagnosticos.php",method:"POST",dataType:"html",data:{existe:e}}).done((function(e){$("#edtSegDf2").html(e)})).fail((function(){console.log("error")}));else{$("#edtSegDf2").html("<option value='0'>No hay actividades existentes</option>")}})),$("#edtSegFam").on("change",(function(){$("#seleccionActual3").remove(),$("#seleccionActual31").remove()})),$("#btnEdtSeg").on("click",(function(){var e=$("#edtSegTip").val();1==e&&$("#formEdtSeg").validate({rules:{edtSegFec:{required:!0},edtSegTip:{valueNotEquals:"0"},edtSegProf:{valueNotEquals:"0"},edtSegMot:{valueNotEquals:"0"},edtSegPac:{valueNotEquals:"0",required:!0},edtSegDp1:{valueNotEquals:"0"},edtSegDf1:{valueNotEquals:"0"}},messages:{edtSegFec:{required:"Ingrese Fecha de Seguimiento"},edtSegTip:{valueNotEquals:"Seleccione Tipo de Seguimiento"},edtSegProf:{valueNotEquals:"Seleccione Profesional"},edtSegMot:{valueNotEquals:"Seleccione Motivo"},edtSegPac:{valueNotEquals:"Seleccione Paciente",required:"Seleccione Paciente atendido"},edtSegDp1:{valueNotEquals:"Seleccione al menos un diagnóstico"},edtSegDf1:{valueNotEquals:"Seleccione al menos un diagnóstico"}},errorElement:"span",errorPlacement:function(e,t){e.addClass("invalid-feedback"),t.closest(".form-group").append(e)},highlight:function(e,t,a){$(e).addClass("is-invalid")},unhighlight:function(e,t,a){$(e).removeClass("is-invalid")}}),$("#comSi1").is(":checked")?$("#formEdtSeg").validate({rules:{edtSegFec:{required:!0},edtSegTip:{valueNotEquals:"0"},edtSegProf:{valueNotEquals:"0"},edtSegMot:{valueNotEquals:"0"},edtSegPac:{valueNotEquals:"0",required:!0},edtSegDp1:{valueNotEquals:"0"}},messages:{edtSegFec:{required:"Ingrese Fecha de Seguimiento"},edtSegTip:{valueNotEquals:"Seleccione Tipo de Seguimiento"},edtSegProf:{valueNotEquals:"Seleccione Profesional"},edtSegMot:{valueNotEquals:"Seleccione Motivo"},rgSegPac:{valueNotEquals:"Seleccione Paciente",required:"Seleccione Paciente atendido"},edtSegDp1:{valueNotEquals:"Seleccione al menos un diagnóstico"}},errorElement:"span",errorPlacement:function(e,t){e.addClass("invalid-feedback"),t.closest(".form-group").append(e)},highlight:function(e,t,a){$(e).addClass("is-invalid")},unhighlight:function(e,t,a){$(e).removeClass("is-invalid")}}):2==e?$("#formEdtSeg").validate({rules:{edtSegFec:{required:!0},edtSegTip:{valueNotEquals:"0"},edtSegProf:{valueNotEquals:"0"},edtSegMot:{valueNotEquals:"0"},edtSegPac:{valueNotEquals:"0",required:!0},edtSegDp1:{valueNotEquals:"0"},edtSegFam:{valueNotEquals:"0"},edtSegDf1:{valueNotEquals:"0"}},messages:{edtSegFec:{required:"Ingrese Fecha de Seguimiento"},edtSegTip:{valueNotEquals:"Seleccione Tipo de Seguimiento"},edtSegProf:{valueNotEquals:"Seleccione Profesional"},edtSegMot:{valueNotEquals:"Seleccione Motivo"},edtSegPac:{valueNotEquals:"Seleccione Paciente",required:"Seleccione Paciente atendido"},edtSegDp1:{valueNotEquals:"Seleccione al menos un diagnóstico"},edtSegFam:{valueNotEquals:"Seleccione Familiar"},edtSegDf1:{valueNotEquals:"Seleccione al menos un diagnóstico"}},errorElement:"span",errorPlacement:function(e,t){e.addClass("invalid-feedback"),t.closest(".form-group").append(e)},highlight:function(e,t,a){$(e).addClass("is-invalid")},unhighlight:function(e,t,a){$(e).removeClass("is-invalid")}}):$("#formEdtSeg").validate({rules:{edtSegFec:{required:!0},edtSegTip:{valueNotEquals:"0"},edtSegProf:{valueNotEquals:"0"},edtSegMot:{valueNotEquals:"0"},edtSegPac:{valueNotEquals:"0",required:!0},edtSegDp1:{valueNotEquals:"0"}},messages:{edtSegFec:{required:"Ingrese Fecha de Seguimiento"},edtSegTip:{valueNotEquals:"Seleccione Tipo de Seguimiento"},edtSegProf:{valueNotEquals:"Seleccione Profesional"},edtSegMot:{valueNotEquals:"Seleccione Motivo"},edtSegPac:{valueNotEquals:"Seleccione Paciente",required:"Seleccione Paciente atendido"},edtSegDp1:{valueNotEquals:"Seleccione al menos un diagnóstico"}},errorElement:"span",errorPlacement:function(e,t){e.addClass("invalid-feedback"),t.closest(".form-group").append(e)},highlight:function(e,t,a){$(e).addClass("is-invalid")},unhighlight:function(e,t,a){$(e).removeClass("is-invalid")}})})),$(".datatableSeguimiento tbody").on("click",".btnAnularSeguimiento",(function(){var e=$(this).attr("idSeguimiento"),t=$(this).attr("idProfesional"),a=$("#idProfH").val();0!=a&&t==a?Swal.fire({title:"¿Está seguro(a) de anular el seguimiento?",text:"¡Si no lo está, puede cancelar la acción!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#343a40",cancelButtonText:"Cancelar",cancelButtonColor:"#d33",confirmButtonText:"¡Sí, anular seguimiento!"}).then((function(t){t.value&&(window.location="index.php?ruta=seguimiento&idSeguimiento="+e)})):Swal.fire({icon:"error",title:"No tienes permiso para anular el seguimiento seleccionado",showConfirmButton:!1,timer:1600})}));